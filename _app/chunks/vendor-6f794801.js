var Ft=Object.defineProperty;var ft=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable;var dt=(t,e,n)=>e in t?Ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||(e={}))Pt.call(e,n)&&dt(t,n,e[n]);if(ft)for(var n of ft(e))Kt.call(e,n)&&dt(t,n,e[n]);return t};function v(){}function Bt(t,e){for(const n in e)t[n]=e[n];return t}function gt(t){return t()}function _t(){return Object.create(null)}function T(t){t.forEach(gt)}function Dt(t){return typeof t=="function"}function zt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let D;function Xe(t,e){return D||(D=document.createElement("a")),D.href=e,t===D.href}function Ht(t){return Object.keys(t).length===0}function Vt(t,...e){if(t==null)return v;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ze(t,e,n){t.$$.on_destroy.push(Vt(e,n))}function qe(t,e,n,s){if(t){const r=pt(t,e,n,s);return t[0](r)}}function pt(t,e,n,s){return t[1]&&s?Bt(n.ctx.slice(),t[1](s(e))):n.ctx}function tn(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const c=[],i=Math.max(e.dirty.length,r.length);for(let a=0;a<i;a+=1)c[a]=e.dirty[a]|r[a];return c}return e.dirty|r}return e.dirty}function en(t,e,n,s,r,c){if(r){const i=pt(e,n,s,c);t.p(i,r)}}function nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}let z=!1;function Gt(){z=!0}function Wt(){z=!1}function Yt(t,e,n,s){for(;t<e;){const r=t+(e-t>>1);n(r)<=s?t=r+1:e=r}return t}function Ut(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const o=[];for(let l=0;l<e.length;l++){const u=e[l];u.claim_order!==void 0&&o.push(u)}e=o}const n=new Int32Array(e.length+1),s=new Int32Array(e.length);n[0]=-1;let r=0;for(let o=0;o<e.length;o++){const l=e[o].claim_order,u=(r>0&&e[n[r]].claim_order<=l?r+1:Yt(1,r,d=>e[n[d]].claim_order,l))-1;s[o]=n[u]+1;const h=u+1;n[h]=o,r=Math.max(h,r)}const c=[],i=[];let a=e.length-1;for(let o=n[r]+1;o!=0;o=s[o-1]){for(c.push(e[o-1]);a>=o;a--)i.push(e[a]);a--}for(;a>=0;a--)i.push(e[a]);c.reverse(),i.sort((o,l)=>o.claim_order-l.claim_order);for(let o=0,l=0;o<i.length;o++){for(;l<c.length&&i[o].claim_order>=c[l].claim_order;)l++;const u=l<c.length?c[l]:null;t.insertBefore(i[o],u)}}function Qt(t,e){if(z){for(Ut(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function sn(t,e,n){z&&!n?Qt(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function Jt(t){t.parentNode.removeChild(t)}function rn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Xt(t){return document.createElement(t)}function Zt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t){return document.createTextNode(t)}function cn(){return X(" ")}function on(){return X("")}function an(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ln(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function qt(t){return Array.from(t.childNodes)}function te(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function mt(t,e,n,s,r=!1){te(t);const c=(()=>{for(let i=t.claim_info.last_index;i<t.length;i++){const a=t[i];if(e(a)){const o=n(a);return o===void 0?t.splice(i,1):t[i]=o,r||(t.claim_info.last_index=i),a}}for(let i=t.claim_info.last_index-1;i>=0;i--){const a=t[i];if(e(a)){const o=n(a);return o===void 0?t.splice(i,1):t[i]=o,r?o===void 0&&t.claim_info.last_index--:t.claim_info.last_index=i,a}}return s()})();return c.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,c}function yt(t,e,n,s){return mt(t,r=>r.nodeName===e,r=>{const c=[];for(let i=0;i<r.attributes.length;i++){const a=r.attributes[i];n[a.name]||c.push(a.name)}c.forEach(i=>r.removeAttribute(i))},()=>s(e))}function un(t,e,n){return yt(t,e,n,Xt)}function hn(t,e,n){return yt(t,e,n,Zt)}function ee(t,e){return mt(t,n=>n.nodeType===3,n=>{const s=""+e;if(n.data.startsWith(s)){if(n.data.length!==s.length)return n.splitText(s.length)}else n.data=s},()=>X(e),!0)}function fn(t){return ee(t," ")}function dn(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function gn(t,e){t.value=e==null?"":e}function _n(t,e,n){t.classList[n?"add":"remove"](e)}function pn(t,e=document.body){return Array.from(e.querySelectorAll(t))}let H;function V(t){H=t}function G(){if(!H)throw new Error("Function called outside component initialization");return H}function mn(t){G().$$.on_mount.push(t)}function yn(t){G().$$.after_update.push(t)}function xn(t,e){G().$$.context.set(t,e)}function Mn(t){return G().$$.context.get(t)}const j=[],xt=[],W=[],Mt=[],ne=Promise.resolve();let Z=!1;function se(){Z||(Z=!0,ne.then(bt))}function q(t){W.push(t)}let tt=!1;const et=new Set;function bt(){if(!tt){tt=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];V(e),re(e.$$)}for(V(null),j.length=0;xt.length;)xt.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];et.has(e)||(et.add(e),e())}W.length=0}while(j.length);for(;Mt.length;)Mt.pop()();Z=!1,tt=!1,et.clear()}}function re(t){if(t.fragment!==null){t.update(),T(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const Y=new Set;let k;function bn(){k={r:0,c:[],p:k}}function En(){k.r||T(k.c),k=k.p}function ie(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function Sn(t,e,n,s){if(t&&t.o){if(Y.has(t))return;Y.add(t),k.c.push(()=>{Y.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function wn(t,e){const n={},s={},r={$$scope:1};let c=t.length;for(;c--;){const i=t[c],a=e[c];if(a){for(const o in i)o in a||(s[o]=1);for(const o in a)r[o]||(n[o]=a[o],r[o]=1);t[c]=a}else for(const o in i)r[o]=1}for(const i in s)i in n||(n[i]=void 0);return n}function An(t){return typeof t=="object"&&t!==null?t:{}}function In(t){t&&t.c()}function $n(t,e){t&&t.l(e)}function ce(t,e,n,s){const{fragment:r,on_mount:c,on_destroy:i,after_update:a}=t.$$;r&&r.m(e,n),s||q(()=>{const o=c.map(gt).filter(Dt);i?i.push(...o):T(o),t.$$.on_mount=[]}),a.forEach(q)}function oe(t,e){const n=t.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ae(t,e){t.$$.dirty[0]===-1&&(j.push(t),se(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ln(t,e,n,s,r,c,i,a=[-1]){const o=H;V(t);const l=t.$$={fragment:null,ctx:null,props:c,update:v,not_equal:r,bound:_t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:_t(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};i&&i(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},(h,d,..._)=>{const g=_.length?_[0]:d;return l.ctx&&r(l.ctx[h],l.ctx[h]=g)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](g),u&&ae(t,h)),d}):[],l.update(),u=!0,T(l.before_update),l.fragment=s?s(l.ctx):!1,e.target){if(e.hydrate){Gt();const h=qt(e.target);l.fragment&&l.fragment.l(h),h.forEach(Jt)}else l.fragment&&l.fragment.c();e.intro&&ie(t.$$.fragment),ce(t,e.target,e.anchor,e.customElement),Wt(),bt()}V(o)}class kn{$destroy(){oe(this,1),this.$destroy=v}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const C=[];function Rn(t,e=v){let n;const s=new Set;function r(a){if(zt(t,a)&&(t=a,n)){const o=!C.length;for(const l of s)l[1](),C.push(l,t);if(o){for(let l=0;l<C.length;l+=2)C[l][0](C[l+1]);C.length=0}}}function c(a){r(a(t))}function i(a,o=v){const l=[a,o];return s.add(l),s.size===1&&(n=e(r)||v),a(t),()=>{s.delete(l),s.size===0&&(n(),n=null)}}return{set:r,update:c,subscribe:i}}function b(t){return Array.isArray?Array.isArray(t):wt(t)==="[object Array]"}const le=1/0;function ue(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-le?"-0":e}function he(t){return t==null?"":ue(t)}function E(t){return typeof t=="string"}function Et(t){return typeof t=="number"}function fe(t){return t===!0||t===!1||de(t)&&wt(t)=="[object Boolean]"}function St(t){return typeof t=="object"}function de(t){return St(t)&&t!==null}function p(t){return t!=null}function nt(t){return!t.trim().length}function wt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ge="Incorrect 'index' type",_e=t=>`Invalid value for key ${t}`,pe=t=>`Pattern length exceeds max of ${t}.`,me=t=>`Missing ${t} property in key`,ye=t=>`Property 'weight' in key '${t}' must be a positive integer`,At=Object.prototype.hasOwnProperty;class xe{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(s=>{let r=It(s);n+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function It(t){let e=null,n=null,s=null,r=1;if(E(t)||b(t))s=t,e=$t(t),n=st(t);else{if(!At.call(t,"name"))throw new Error(me("name"));const c=t.name;if(s=c,At.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(ye(c));e=$t(c),n=st(c)}return{path:e,id:n,weight:r,src:s}}function $t(t){return b(t)?t:t.split(".")}function st(t){return b(t)?t.join("."):t}function Me(t,e){let n=[],s=!1;const r=(c,i,a)=>{if(!!p(c))if(!i[a])n.push(c);else{let o=i[a];const l=c[o];if(!p(l))return;if(a===i.length-1&&(E(l)||Et(l)||fe(l)))n.push(he(l));else if(b(l)){s=!0;for(let u=0,h=l.length;u<h;u+=1)r(l[u],i,a+1)}else i.length&&r(l,i,a+1)}};return r(t,E(e)?e.split("."):e,0),s?n:n[0]}const be={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ee={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Se={location:0,threshold:.6,distance:100},we={useExtendedSearch:!1,getFn:Me,ignoreLocation:!1,ignoreFieldNorm:!1};var f=L(L(L(L({},Ee),be),Se),we);const Ae=/[^ ]+/g;function Ie(t=3){const e=new Map,n=Math.pow(10,t);return{get(s){const r=s.match(Ae).length;if(e.has(r))return e.get(r);const c=1/Math.sqrt(r),i=parseFloat(Math.round(c*n)/n);return e.set(r,i),i},clear(){e.clear()}}}class rt{constructor({getFn:e=f.getFn}={}){this.norm=Ie(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,E(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();E(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!p(e)||nt(e))return;let s={v:e,i:n,n:this.norm.get(e)};this.records.push(s)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach((r,c)=>{let i=this.getFn(e,r.path);if(!!p(i)){if(b(i)){let a=[];const o=[{nestedArrIndex:-1,value:i}];for(;o.length;){const{nestedArrIndex:l,value:u}=o.pop();if(!!p(u))if(E(u)&&!nt(u)){let h={v:u,i:l,n:this.norm.get(u)};a.push(h)}else b(u)&&u.forEach((h,d)=>{o.push({nestedArrIndex:d,value:h})})}s.$[c]=a}else if(!nt(i)){let a={v:i,n:this.norm.get(i)};s.$[c]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Lt(t,e,{getFn:n=f.getFn}={}){const s=new rt({getFn:n});return s.setKeys(t.map(It)),s.setSources(e),s.create(),s}function $e(t,{getFn:e=f.getFn}={}){const{keys:n,records:s}=t,r=new rt({getFn:e});return r.setKeys(n),r.setIndexRecords(s),r}function U(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:r=f.distance,ignoreLocation:c=f.ignoreLocation}={}){const i=e/t.length;if(c)return i;const a=Math.abs(s-n);return r?i+a/r:a?1:i}function Le(t=[],e=f.minMatchCharLength){let n=[],s=-1,r=-1,c=0;for(let i=t.length;c<i;c+=1){let a=t[c];a&&s===-1?s=c:!a&&s!==-1&&(r=c-1,r-s+1>=e&&n.push([s,r]),s=-1)}return t[c-1]&&c-s>=e&&n.push([s,c-1]),n}const R=32;function ke(t,e,n,{location:s=f.location,distance:r=f.distance,threshold:c=f.threshold,findAllMatches:i=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,includeMatches:o=f.includeMatches,ignoreLocation:l=f.ignoreLocation}={}){if(e.length>R)throw new Error(pe(R));const u=e.length,h=t.length,d=Math.max(0,Math.min(s,h));let _=c,g=d;const m=a>1||o,I=m?Array(h):[];let M;for(;(M=t.indexOf(e,g))>-1;){let y=U(e,{currentLocation:M,expectedLocation:d,distance:r,ignoreLocation:l});if(_=Math.min(y,_),g=M+u,m){let S=0;for(;S<u;)I[M+S]=1,S+=1}}g=-1;let N=[],$=1,K=u+h;const jt=1<<u-1;for(let y=0;y<u;y+=1){let S=0,w=K;for(;S<w;)U(e,{errors:y,currentLocation:d+w,expectedLocation:d,distance:r,ignoreLocation:l})<=_?S=w:K=w,w=Math.floor((K-S)/2+S);K=w;let ut=Math.max(1,d-w+1),J=i?h:Math.min(d+w,h)+u,O=Array(J+2);O[J+1]=(1<<y)-1;for(let x=J;x>=ut;x-=1){let B=x-1,ht=n[t.charAt(B)];if(m&&(I[B]=+!!ht),O[x]=(O[x+1]<<1|1)&ht,y&&(O[x]|=(N[x+1]|N[x])<<1|1|N[x+1]),O[x]&jt&&($=U(e,{errors:y,currentLocation:B,expectedLocation:d,distance:r,ignoreLocation:l}),$<=_)){if(_=$,g=B,g<=d)break;ut=Math.max(1,2*d-g)}}if(U(e,{errors:y+1,currentLocation:d,expectedLocation:d,distance:r,ignoreLocation:l})>_)break;N=O}const Q={isMatch:g>=0,score:Math.max(.001,$)};if(m){const y=Le(I,a);y.length?o&&(Q.indices=y):Q.isMatch=!1}return Q}function Re(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<s-n-1}return e}class kt{constructor(e,{location:n=f.location,threshold:s=f.threshold,distance:r=f.distance,includeMatches:c=f.includeMatches,findAllMatches:i=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,isCaseSensitive:o=f.isCaseSensitive,ignoreLocation:l=f.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:c,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(d,_)=>{this.chunks.push({pattern:d,alphabet:Re(d),startIndex:_})},h=this.pattern.length;if(h>R){let d=0;const _=h%R,g=h-_;for(;d<g;)u(this.pattern.substr(d,R),d),d+=R;if(_){const m=h-R;u(this.pattern.substr(m),m)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return s&&(g.indices=[[0,e.length-1]]),g}const{location:r,distance:c,threshold:i,findAllMatches:a,minMatchCharLength:o,ignoreLocation:l}=this.options;let u=[],h=0,d=!1;this.chunks.forEach(({pattern:g,alphabet:m,startIndex:I})=>{const{isMatch:M,score:N,indices:$}=ke(e,g,m,{location:r+I,distance:c,threshold:i,findAllMatches:a,minMatchCharLength:o,includeMatches:s,ignoreLocation:l});M&&(d=!0),h+=N,M&&$&&(u=[...u,...$])});let _={isMatch:d,score:d?h/this.chunks.length:1};return d&&s&&(_.indices=u),_}}class A{constructor(e){this.pattern=e}static isMultiMatch(e){return Rt(e,this.multiRegex)}static isSingleMatch(e){return Rt(e,this.singleRegex)}search(){}}function Rt(t,e){const n=t.match(e);return n?n[1]:null}class Ne extends A{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Oe extends A{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class ve extends A{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Ce extends A{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Te extends A{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class je extends A{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Nt extends A{constructor(e,{location:n=f.location,threshold:s=f.threshold,distance:r=f.distance,includeMatches:c=f.includeMatches,findAllMatches:i=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,isCaseSensitive:o=f.isCaseSensitive,ignoreLocation:l=f.ignoreLocation}={}){super(e);this._bitapSearch=new kt(e,{location:n,threshold:s,distance:r,includeMatches:c,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ot extends A{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,s;const r=[],c=this.pattern.length;for(;(s=e.indexOf(this.pattern,n))>-1;)n=s+c,r.push([s,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const it=[Ne,Ot,ve,Ce,je,Te,Oe,Nt],vt=it.length,Fe=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,Pe="|";function Ke(t,e={}){return t.split(Pe).map(n=>{let s=n.trim().split(Fe).filter(c=>c&&!!c.trim()),r=[];for(let c=0,i=s.length;c<i;c+=1){const a=s[c];let o=!1,l=-1;for(;!o&&++l<vt;){const u=it[l];let h=u.isMultiMatch(a);h&&(r.push(new u(h,e)),o=!0)}if(!o)for(l=-1;++l<vt;){const u=it[l];let h=u.isSingleMatch(a);if(h){r.push(new u(h,e));break}}}return r})}const Be=new Set([Nt.type,Ot.type]);class De{constructor(e,{isCaseSensitive:n=f.isCaseSensitive,includeMatches:s=f.includeMatches,minMatchCharLength:r=f.minMatchCharLength,ignoreLocation:c=f.ignoreLocation,findAllMatches:i=f.findAllMatches,location:a=f.location,threshold:o=f.threshold,distance:l=f.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:r,findAllMatches:i,ignoreLocation:c,location:a,threshold:o,distance:l},this.pattern=n?e:e.toLowerCase(),this.query=Ke(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let c=0,i=[],a=0;for(let o=0,l=n.length;o<l;o+=1){const u=n[o];i.length=0,c=0;for(let h=0,d=u.length;h<d;h+=1){const _=u[h],{isMatch:g,indices:m,score:I}=_.search(e);if(g){if(c+=1,a+=I,s){const M=_.constructor.type;Be.has(M)?i=[...i,...m]:i.push(m)}}else{a=0,c=0,i.length=0;break}}if(c){let h={isMatch:!0,score:a/c};return s&&(h.indices=i),h}}return{isMatch:!1,score:1}}}const ct=[];function ze(...t){ct.push(...t)}function ot(t,e){for(let n=0,s=ct.length;n<s;n+=1){let r=ct[n];if(r.condition(t,e))return new r(t,e)}return new kt(t,e)}const F={AND:"$and",OR:"$or"},at={PATH:"$path",PATTERN:"$val"},lt=t=>!!(t[F.AND]||t[F.OR]),He=t=>!!t[at.PATH],Ve=t=>!b(t)&&St(t)&&!lt(t),Ct=t=>({[F.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Tt(t,e,{auto:n=!0}={}){const s=r=>{let c=Object.keys(r);const i=He(r);if(!i&&c.length>1&&!lt(r))return s(Ct(r));if(Ve(r)){const o=i?r[at.PATH]:c[0],l=i?r[at.PATTERN]:r[o];if(!E(l))throw new Error(_e(o));const u={keyId:st(o),pattern:l};return n&&(u.searcher=ot(l,e)),u}let a={children:[],operator:c[0]};return c.forEach(o=>{const l=r[o];b(l)&&l.forEach(u=>{a.children.push(s(u))})}),a};return lt(t)||(t=Ct(t)),s(t)}function Ge(t,{ignoreFieldNorm:e=f.ignoreFieldNorm}){t.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:c,score:i})=>{const a=r?r.weight:null;s*=Math.pow(i===0&&a?Number.EPSILON:i,(a||1)*(e?1:c))}),n.score=s})}function We(t,e){const n=t.matches;e.matches=[],!!p(n)&&n.forEach(s=>{if(!p(s.indices)||!s.indices.length)return;const{indices:r,value:c}=s;let i={indices:r,value:c};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),e.matches.push(i)})}function Ye(t,e){e.score=t.score}function Ue(t,e,{includeMatches:n=f.includeMatches,includeScore:s=f.includeScore}={}){const r=[];return n&&r.push(We),s&&r.push(Ye),t.map(c=>{const{idx:i}=c,a={item:e[i],refIndex:i};return r.length&&r.forEach(o=>{o(c,a)}),a})}class P{constructor(e,n={},s){this.options=L(L({},f),n),this.options.useExtendedSearch,this._keyStore=new xe(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof rt))throw new Error(ge);this._myIndex=n||Lt(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){!p(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const c=this._docs[s];e(c,s)&&(this.removeAt(s),s-=1,r-=1,n.push(c))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:c,sortFn:i,ignoreFieldNorm:a}=this.options;let o=E(e)?E(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ge(o,{ignoreFieldNorm:a}),c&&o.sort(i),Et(n)&&n>-1&&(o=o.slice(0,n)),Ue(o,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const n=ot(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:c,i,n:a})=>{if(!p(c))return;const{isMatch:o,score:l,indices:u}=n.searchIn(c);o&&r.push({item:c,idx:i,matches:[{score:l,value:c,norm:a,indices:u}]})}),r}_searchLogical(e){const n=Tt(e,this.options),s=(a,o,l)=>{if(!a.children){const{keyId:u,searcher:h}=a,d=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(o,u),searcher:h});return d&&d.length?[{idx:l,item:o,matches:d}]:[]}switch(a.operator){case F.AND:{const u=[];for(let h=0,d=a.children.length;h<d;h+=1){const _=a.children[h],g=s(_,o,l);if(g.length)u.push(...g);else return[]}return u}case F.OR:{const u=[];for(let h=0,d=a.children.length;h<d;h+=1){const _=a.children[h],g=s(_,o,l);if(g.length){u.push(...g);break}}return u}}},r=this._myIndex.records,c={},i=[];return r.forEach(({$:a,i:o})=>{if(p(a)){let l=s(n,a,o);l.length&&(c[o]||(c[o]={idx:o,item:a,matches:[]},i.push(c[o])),l.forEach(({matches:u})=>{c[o].matches.push(...u)}))}}),i}_searchObjectList(e){const n=ot(e,this.options),{keys:s,records:r}=this._myIndex,c=[];return r.forEach(({$:i,i:a})=>{if(!p(i))return;let o=[];s.forEach((l,u)=>{o.push(...this._findMatches({key:l,value:i[u],searcher:n}))}),o.length&&c.push({idx:a,item:i,matches:o})}),c}_findMatches({key:e,value:n,searcher:s}){if(!p(n))return[];let r=[];if(b(n))n.forEach(({v:c,i,n:a})=>{if(!p(c))return;const{isMatch:o,score:l,indices:u}=s.searchIn(c);o&&r.push({score:l,key:e,value:c,idx:i,norm:a,indices:u})});else{const{v:c,n:i}=n,{isMatch:a,score:o,indices:l}=s.searchIn(c);a&&r.push({score:o,key:e,value:c,norm:i,indices:l})}return r}}P.version="6.4.6";P.createIndex=Lt;P.parseIndex=$e;P.config=f;P.parseQuery=Tt;ze(De);export{mn as A,Bt as B,Rn as C,Mn as D,_n as E,Qt as F,Zt as G,hn as H,Xe as I,v as J,rn as K,Ze as L,qe as M,en as N,nn as O,tn as P,pn as Q,gn as R,kn as S,an as T,T as U,P as V,qt as a,ln as b,un as c,Jt as d,Xt as e,sn as f,ee as g,dn as h,Ln as i,In as j,cn as k,on as l,$n as m,fn as n,ce as o,wn as p,An as q,bn as r,zt as s,X as t,Sn as u,oe as v,En as w,ie as x,xn as y,yn as z};
